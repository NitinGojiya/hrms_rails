<%=render partial:'shared/usernav' ,object:@user%>
<div class="p-5 bg-blue-200">


<div class="max-w-7xl mx-auto">
        <!-- Dashboard Header -->
        <h1 class="text-2xl font-bold text-gray-800 mb-6">Dashboard</h1>

        <!-- Profile Section -->
        <div class="bg-blue-800 text-white p-6 rounded-lg shadow-md flex items-center justify-between relative overflow-hidden mb-8">
            <div class="flex items-center">
                <!-- User Avatar -->
                <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mr-4">
                    <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAJQAsAMBIgACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAABgEDBAUHAgj/xAA+EAABAwMBBQQFCgQHAAAAAAABAAIDBAURIQYSMUFRBxNhcSJTgbHSFRYyQlKRkpOhwQgUFyMzYmNz0eHw/8QAGgEBAAMBAQEAAAAAAAAAAAAAAAEDBAIFBv/EACURAQEAAgIBAgYDAAAAAAAAAAABAhEDEiExUQQFEyJBYRSBwf/aAAwDAQACEQMRAD8A7iiIgIiICIiAiKhKCuUyFFNtduLPshRufWzNkqy3MVJG4d489cch4lfP+1fahtHtFK9orZKGkP0aelcWaeLhqfcg+m7he7VbTi43SipD0qKhkfvKwYtstl5pNyPaK0ufyArI9f1Xx4XbxLnHU8T1QHy+5B9uwSxzRiSF7XsPBzHAg+0L3kdQvjOxbQ3awVAms9wnpHZy4Mcd13m3gfau59nPa5T3yWG2bQBlJXyejHONIpndP8pP3IOtIqZHVVQEREBERAREQEREBERAREQFptq7sbJs5crmGgupYHPaCeLsafqtyuV/xDVUtPsZTwxOwyprmseOoDXO94CD59uddUXOsnra2V81TM4vkkcclxP/ALGPBYeF0bYjszk2msMtznq3UneEtpBuBwfg6ucOOM6adFpb72d7TWd7jJb3VMA4T0v9xpHkNR7Que03p10y1vSJIrssEkLt2Vj2O6OaR71bx4rpyorjXgY+kCOBBWXQWW53GQR0FBUzvPARxE5W6vGwG0FlsXyvcqdkMAeGPj3wZGZ4EgaAZ04qNxOq7n2LbXT7T7Pvpq8PdWW8tjfMRpI053Tnrpr5eK6OuUfw7TiXY+riDQDDWuBIGpy1pXV1KBERAREQEREBERAREQEREBcn/iMjc/ZG3lozu17c48WPHvXWFC+063i62mgpsbzvlGB271aHel+mVF8RMm6uWKhZbLLQUMbcNgp44/ubr+uVnjQ5TrjgqLDbuvSxmppZnoqSoOZ6WCUn7cYKsss9sYcst1ID/st/4WYibqesUjjZGN2JjWN6NAAWDf7bHdrJX26QZbUQOZ5HkfvwtgmmcqN+douPjSA/w5sfFY7xHI3dcytDXA8juDIXX1BuzO3Ntcu0kLRjfuz5B5OY0+8lThb5dx5tmqqiIpQIiICIiAiIgIiICIiAo9fXH5VpWH6IbkeakK110oBWNY5rt2WN2Wu/Yrjkm8VnHlMct1r1RVcCHEHjwVFi1p6M8wRERKqIFQDL8DUnQBQhSyk/LFQ1ow0sy7HXRSJa+2W8UneSvdvSyH0iOQ6LYLbxyzF5vJlMsvCqIiscCIiAiIgIiICIiAiIgLyvSog1FdFuTEgei7X2rFW0u24yifK4fQ1WraQWgtdvN4g+Cx8uOsm/gz7YiKqKpcLIoYu8qBkaN1KxnEBuScDn4LZWgskpRKzg48VbxY7yU82WsGeqoi2MAiIgIiICIiAiIgIiICIqE4KCqosWuuFLb4HT1szIY2jJLz7uqhNy7S6VkrWW+lfLHvAOlf6Po8yBxUzG1FyiZXINqIX0xOjhqeije/Nb5DFON+PGhHvC3kMrZoWTRu3mSND2nqCMrxUwR1ERjkaMciBqCquTDsv4uTqwGVlOW570DwKOradoz3gPktZVU0lLKWPOejhwcFSlp5KmYMYNOZPILL186bO81tlGSa4SiGAFrPrE+8qRWsMp4G07ToOBPNYtJTR0sQjjGRzJ+srk0rIYXzSO3WRtL3HoAMrVx4dWLl5O3hts4CZXP7Z2l0rpnMuFK+KPeIZKw73o8iRxU2obhS3CBs9FOyaNwyCw+/orbLFMsrKyqryDqvShIiIgIiICIiAqE4QrQbXX35HomiHBqpdIweDRzcVMm7pFumRe9oaGzsxPJvzn6MLNXHz6e1Qe6bZ3St3m072UsR5R6uPtUelkfPI6WZ7nyPOXOdxJXhaceOT1U5Z2rNzlfLFJJLI+SRxA33uyfvK1HBbqWJszcP4ea11ZAyFwDHEk6kHkuvRzHQuze7/zNA+2zOzJTaxeMZP7FTHXkuJWS4vtNzhrI84Y70wPrNPELtlPIyoZHJC4OjkAcxwOhB5rNnjryvxy3GDfamlpre+WsI3R/hgcS7lhebBVUlXQNkpCB6xp4td4qGbXSVr7xLFV5DY9Imt+jucirOzdRWU93gbS5PfODHNdwI/64rVPhJePt+Xi35vlPifp6+30dK8+Kh3aRd/5agZbYXYkqdZfCMH9ypjUPZTMklncGRsaXvcToGjmuJXu4vu1zmrJM4e70Gn6reQWbDHd29nK6mmBjIW3tkrooo5IpHRyNJG+x2D94WDRwMmcQ9xBGoA5rYxRNhbhnDjxWiRTUnte2Vzot1tQ9tVEOUmjh7QpxZNoaG8MxBJuTgelC/Rw8uo8lyNe4pHwSNlhe5kjDkObxBXGXFKmZ2O4A5VVH9kb6LxRFsxAqotJAODhycFvwchZ7NXS+XaqIihIiIg8nhquT7X1prb9UkOyyI900eS6w44aSuKVr+8ral/2pnn9SreGedquS/hYREWmqhaiqDmzu3tcnj1W3BBAIKxK+Lfj3wMlnLwXKWuXUOy27iooZbXM4d5T+lFnnGeXsK5es6x3OWz3SCuiyTGfSb9pvMLjLHtNOpl18pZtNP399q3Dg1+4PIae/KxrRL3N2opDwE7c+ROP3WM+X+YkfPkHvXF+fPVee8EX9xxIDCHZ6YXqTHXFr9PhMs7l8V2/f+pX2pXgQUUdrgcO9qPSlxyjHL2lcuPHVZ18uct3uk9dLkGR3otJ+i3kFgry8ces0+77dptdpQ507d3TB49Ft1i0EW5HvnQv5eCyiQASSrI4oiIpG62QrDR3+mJdhkp7pw65XWRwXE6J/d1tO/7MrD+oXa2HLVn5p52u4r4ekRFSsEREFuXSJ58CuIv1cT1JK7dO0vhe1uMuaQMrm42DvHraP8x3wq3isnqr5Jb6IwvLzusJ8FKvmHd/W0f5jvhXiXYK8uje1stHkjA/uO+FW98fdX1qJ0bt+maT0IV4gEY5HipFS9n16hj3HzUR1zpI74Vf+Yd39bR/mO+FO+PudcnP6mIwylgGnEHqFax04qe1fZ5eJmjclog4cMyO4fhWL/TS++uoPzXfCublj7p61orVPvMMJ+pq3yS7T7rBCPr6u8lIKfs5v0MzZBNQnB1Heu4fhSo7Ob9NM6QzUIydB3rtB+Faf5U+n1eRPlmvjPq6+31/tCcK7TRGaUMI04k+Cl39NL766g/Nd8KyqTs8u8LTvy0RceOJHcPwrPMsfd6/Wo8AAMchwVmsduU73DoApf8AMO7+to/zHfCrFX2fXqaPcZNRDXOsrvhU98fdHWo4w7zAfBVUmi2CvDY2NdLR5AwcSO+Fe/mHd/W0f5jvhU98fc61GGaPa7oQV2+E5iafALmx2DvGo72j1/1HfCukQNLIWNdjLWgHCp5LLrSzjlm9riIiqWCIiAqFEQUVeSIgAKiIgqV5yiIGUyiIGV6CoiAqkIiByVERBUKqIgIiIP/Z" alt="User Avatar" class="rounded-full">
                </div>
                <div>
                    <h2 class="text-xl font-semibold">
                        <% if authenticated? %>
                               Email <%= @user.email_address %>
                        <% end %>
                    </h2>
                    <p class="text-blue-200">Job:
                        <%= @profile.job_title if @profile%>
                    </p>
                    <p class="text-blue-200">
                        <% if authenticated? && @user.profile.present? %>
                            Name <%= @user.profile.employee_name  %>
                        <% end %>
                    </p>
                </div>
            </div>
            <!-- Edit Profile Button -->
            <!-- <button class=>
                Edit Profile
            </button> -->
            <%if @profile.present?%>
            <%= link_to "View Profile", profile_path(@profile) ,class:"bg-yellow-400 text-blue-900 font-bold py-2 px-4 rounded-full shadow-lg hover:bg-yellow-300 transition duration-300 pointer"%>
            <%else%>
            <%= link_to "Add Profile", '/profiles/new' ,class:"bg-yellow-400 text-blue-900 font-bold py-2 px-4 rounded-full shadow-lg hover:bg-yellow-300 transition duration-300 pointer"%>
            <%end%>
            <!-- Decorative Element (Paper Plane) -->
            <div class="absolute top-0 right-0 -mr-10 -mt-10">
                <svg class="w-32 h-32 text-blue-700 opacity-20 transform rotate-45" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                </svg>
            </div>
        </div>

        <!-- Quick Actions Section -->
        <div class="mb-8">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">Quick Actions</h3>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
               <%=render partial:'applyleave', object:@user %>

                <a href="/salary" class="bg-white py-3 px-4 rounded-lg shadow-md text-gray-700 font-medium hover:bg-gray-200 transition duration-300">
                    View Payslip
                </a>
                <%if @profile.present?%>
                  <%= link_to "View Profile", profile_path(@profile) ,class:"bg-white py-3 px-4 rounded-lg shadow-md text-gray-700 font-medium hover:bg-gray-200 transition duration-300"%>
                <%else%>
                 <%= link_to "Add Profile", '/profiles/new' ,class:"bg-white py-3 px-4 rounded-lg shadow-md text-gray-700 font-medium hover:bg-gray-200 transition duration-300"%>
                <%end%>
                <button class="bg-white py-3 px-4 rounded-lg shadow-md text-gray-700 font-medium hover:bg-gray-200 transition duration-300">
                    Events
                </button>
            </div>
        </div>

        <!-- Available Leave Days & To-dos Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 ">
            <!-- Available Leave Days Card -->
          <%= render 'leaves' %>

            <!-- To-dos Card -->
            <div class="bg-white p-6 rounded-lg shadow-md h-[400px] overflow-y-auto">

                 <div class="flex justify-between items-center mb-4 sticky top-0 z-10 bg-white mb-5 ">

                    <h3 class="text-xl font-semibold text-gray-800">To-dos</h3>
                    <button class="text-gray-500 hover:text-black" popovertarget="popover-1" style="anchor-name:--anchor-1">
                        <i class="fas fa-ellipsis-v "></i>
                    </button>
                    <!-- <button class="btn" popovertarget="popover-1" style="anchor-name:--anchor-1">
                        Button
                        </button> -->
                        <ul class="dropdown dropdown-left menu w-52 rounded-box bg-base-100 shadow-sm capitalize"
                        popover id="popover-1" style="position-anchor:--anchor-1">
                        <li class="m-1"><%= link_to 'All', root_path %></li>
                        <li class="m-1 bg-red-500 text-white"><%= link_to 'Pending', root_path(status: 'pending') %></li>
                        <li class="m-1 bg-yellow-500 text-white"><%= link_to 'Process', root_path(status: 'process') %></li>
                        <li class="m-1 bg-green-500 text-white"><%= link_to 'Completed', root_path(status: 'completed') %></li>
                        </ul>
                </div>
                <div class="space-y-3">
                     <% if @todos.present?  %>
                        <%= render partial: 'todos', collection: @todos %>
                    <% else %>
                    <div role="alert" class="alert alert-info">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                            class="h-6 w-6 shrink-0 stroke-current">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span>You have not been assigned any tasks.</span>
                    </div>
                    <% end %>

                </div>
            </div>

            <!-- Announcement  Card -->
           <%=render 'announcement'%>

        </div>
</div>
</div>